#!/bin/sh -
#	$MirBSD: wtf,v 1.2 2003/04/20 19:14:56 tg Exp $
#	$NetBSD: wtf,v 1.7 2000/11/21 00:18:52 soren Exp $
#
# Public domain

acronyms=${ACRONYMDB:-/usr/share/misc/acronyms}

[ x"$1" = x"is" -o x"$1" = x"ist" ] && shift

[ $# -lt 1 ] && echo "Usage: $(basename $0) [is] <acronym>"

rv=0
while [ $# -gt 0 ] ; do
	target=$(echo $1 | tr '[:lower:]' '[:upper:]')
	ans=$(fgrep $target <$acronyms 2>/dev/null \
	    | sed -ne "/^$(echo $target | sed s,/,.,)[[:space:]]/s\`^${target}[[:space:]]*\`\`p")
	if [ -n "$ans" ] ; then
		echo "   ${target}:\n${ans}"
	else
		ans=$(whatis $1 2>/dev/null | egrep "^$1[, ]" 2>/dev/null)
		if [ $? -eq 0 ] ; then
			echo "   ${1}:\n${ans}"
		else
			echo "Gee...  I don't know what $1 means..." 1>&2
			rv=1
			if [ -x /usr/bin/dict ]; then
				echo "Let's try The Dictionary..." 1>&2
				dict $1
				rv=2
			fi
		fi
	fi
	shift
done
exit $rv
